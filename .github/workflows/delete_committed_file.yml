name: 'Any branch: Delete a committed file'

on:
  workflow_dispatch:
    inputs:
      filename:
        description: 'The filename to delete (all history will be deleted for this file)'     
        required: true

jobs:
  rename:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
        
      - name: Setting-up GitHub username
        run: |
          git config --global user.email "github@actions"
          git config --global user.name "Repository manager"

      - name: Installing BFG
        run: wget https://repo1.maven.org/maven2/com/madgag/bfg/1.14.0/bfg-1.14.0.jar
    
      - run: java -jar bfg-1.14.0.jar --delete-files ${{ github.event.inputs.filename }} .
      
      - run: git push
